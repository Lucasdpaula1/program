<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">

    <title>present</title>
    <style>
      body {
        margin: 0;
        background-color: black;
        display: flex;
        justify-content: center;
        align-items: center;
        height: 200vh;
        overflow-x: hidden;
        overflow-y: scroll;
      }
      .content {
        height: 200vh;
        display: flex;
        justify-content: center;
        align-items: center;
        flex-direction: column;
        width: 100%;
      }
      canvas {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        max-width: 100%;
      }
      .message {
        position: fixed;
        font-family: "Dancing Script", cursive;
        top: 10%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 1.5rem;
        color: #ff69b4;
        opacity: 0;
        transition: opacity 1s;
        text-align: center;
        width: 90%;
      }

      
      @keyframes blink {
        0%, 100% {
          transform: scale(1);
          opacity: 1;
        }
        50% {
          transform: scale(1.1);
          opacity: 0.5;
        }
      }
      .first-message{
        position: fixed;
        font-family: "Dancing Script", cursive;
        top: 10%;
        left: 5%;
        transform: translate(-50%, -50%);
        font-size: 1.5rem;
        color: #ff69b4;
        opacity: 1;
        transition: opacity 1s;
        z-index: 1;
        animation: blink 1s infinite;
        text-align: center;
        width: 90%;
      }

      .book {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotateX(90deg);
        width: 90%;
        max-width: 350px;
        height: 300px;
        border-radius: 5px;
        opacity: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        color: blue;
        background-image: 
        url('/assets/letter.png');
        overflow: hidden;
        background-repeat: no-repeat;
        background-size: cover;
        background-position: center;
        perspective: 1000px;
        flex-direction: row;
        transition: transform 2s ease-in-out, opacity 2s ease-in-out;
      }
      
      .button-ver-mais{
        position: fixed;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: pink;
        color: black;
        border: none;
        padding: 10px 20px;
        font-size: 1rem;
        cursor: pointer;
        border-radius: 5px;
        visibility: hidden;
        transition: background 0.3s;
      }
      .button-ver-mais:hover{
        background: #ff69b4;
      }
      
      .icon-arrow{
        position: fixed;
        z-index: 1;
        cursor: pointer;
        color: blue;
        top: 20px;
        left: 20px;
        font-size: 1.2rem;
        visibility: hidden;
      }
      
      .envelope{
        position: absolute;
        top: -30%;
        left: 10%;
        z-index: 1;
        color: blue;
      }
       
      .flip-box {
        position: fixed;
        width: 100%;
        height: 100%;
        position: relative;
        border: solid blue 2px;
        z-index: 1;
        transform-style: preserve-3d;
        transition: transform 0.6s ease-in-out;
        box-shadow: 0px 0px 15px rgba(138, 43, 226, 0.7);
        transition: transform 2s ease-in-out, opacity 2s ease-in-out;
        transform: rotate(360deg);
      }
      
      .message-to-elena{
        position: fixed;
        z-index: 1;
        top: 50%;
        display: none;
        font-family: "Dancing Script", cursive;
        color: #ff69b4;
        font-size: 1rem;
        padding: 20px;
        text-align: center;
        width: 80%;
        transform: translateY(-50%);
      }
      
      .message-to-elena .first-span{
        position:relative;
      }
      
      .message-to-elena .first-span::before{
        content: '';
        color: #8B008B;
        animation: palavra 8s ease-in-out;
      }
      
      .message-to-elena .second-span{
        position: relative;
      }
      
      .message-to-elena .second-span::before{
        content: '';
        color:#8B008B ;
        animation: secondSpan .8s normal;
      }
      
      @keyframes secondSpan{
        0%{
          content: 'meu unico conteudoooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo';
        }100%{
          content: 'ola';
        }
      }
      
      @keyframes palavra{
        0%,20%{
          content: 'Gentil';
        }
        21%,40%{
          content: 'Carism√°tica';
        }
        41%,60%{
          content:'Divertida';
        }
        61%,80%{
          content: 'Viciada em caf√©';
        }
        81%, 100%{
          content: 'Dedicada';
        }
      }
      
      .t {
        background-image: none;
        box-shadow: 0px 0px 15px rgba(138, 43, 226, 0.7);
        transform-style: preserve-3d;
        transition: transform 0.6s ease-in-out;
        transform: rotateY(180deg)
      }
      
      .confetti {
        position: absolute;
        width: 8px;
        height: 8px;
        background-color: red;
        opacity: 0.8;
        border-radius: 50%;
        animation: fall 3s linear infinite;
      }
      
      .cursor{
        display: inline-block;
        width: 3px;
        height: 20px;
        background-color: #ff69b4;
        animation: blinkCursor 0.5s infinite;
      }
      
      @keyframes blinkCursor{
        0%, 100% { opacity: 1; }
        50% { opacity: 0; }
      }
      
      @keyframes fall {
        to {
          transform: translateY(100vh);
          opacity: 0;
        }
      }
      
      #flip {
        background: rgba(255, 105, 180, 0.7);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        font-size: 1rem;
        cursor: pointer;
        z-index: 2;
      }
      
      /* Media Queries para responsividade */
      @media (min-width: 400px) and (max-width: 600px) {
        .message, .first-message {
          font-size: 1.8rem;
           
        }
        .first-message{
            left: 5%;
            top: 25%;
        }
        .book {
          height: 350px;
        }
        
        .message-to-elena {
          font-size: 1.2rem;
        }
      }
      @media (min-width:300px) and (max-width:400px)
      {
        .first-message{
            opacity: 1;
            animation: blink 1s infinite;
            left: 5%;
            top: 25%;
            
        }
      }
      @media (min-width: 601px) {
        .message, .first-message {
          font-size: 2rem;
        }
        
        .book {
          width: 32%;
          height: 200px;
        }
        
        .message-to-elena {
          font-size: 1.5rem;
        }
        
        .icon-arrow {
          top: 10%;
          left: 10%;
          transform: translate(250%,400%);
        }
      }
     

      
    </style>
  </head>
  <body>
   
    
    <div class="content">
      <p class="first-message">Desliza o dedo ai Elena!</p>
      <i class="fa fa-arrow-left icon-arrow"> Back</i>
      <canvas id="heartCanvas"></canvas>
      <div class="message">
        Feliz Dia das Mulheres e Feliz Anivers√°rio! üéâüíñ
      </div>
      <button class="button-ver-mais"> Ver mais</button>
      <div class="book" id="book">
        <button id="flip">open</button> 
        <p class="message-to-elena">Elena Macena, Eu te considero uma pessoa : <span class="first-span"> </span> <span id="second-span"></span>
      </div>
   
    <script>
      const canvas = document.getElementById("heartCanvas");
      const ctx = canvas.getContext("2d");
      const btt = document.querySelector('.button-ver-mais');
      const flipButton = document.getElementById('flip');
      const icon = document.querySelector('.icon-arrow');
      const firstMessage = document.querySelector('.first-message');
      
      // Ajustar tamanho do canvas para dispositivos m√≥veis
      function resizeCanvas() {
        const width = window.innerWidth;
        const height = window.innerHeight;
        
        canvas.width = width;
        canvas.height = height;
        
        // Ajustar para dispositivos menores
        if (width < 600) {
          canvas.width = width * 1.5;
          canvas.height = height * 1.5;
        }
      }
      
      resizeCanvas();
      window.addEventListener('resize', resizeCanvas);
      
      let lines = [];
      let scrollProgress = 0;
      let message = document.querySelector(".message");
      let scrollTimeout;

      function heartShape(t) {
        let x = 16 * Math.pow(Math.sin(t), 3);
        let y =
          13 * Math.cos(t) -
          5 * Math.cos(2 * t) -
          2 * Math.cos(3 * t) -
          Math.cos(4 * t);
          
        // Ajustar posi√ß√£o do cora√ß√£o para telas menores
        const scale = window.innerWidth < 600 ? 10 : 15;
        return { 
          x: x * scale + canvas.width / 2, 
          y: -y * scale + canvas.height / 2 
        };
      }

      function createLine() {
        let t1 = Math.random() * Math.PI * 10;
        let t2 = Math.random() * Math.PI * 10;
        let startPos = heartShape(t1);
        let endPos = heartShape(t2);
        lines.push({
          x1: startPos.x,
          y1: startPos.y,
          x2: endPos.x,
          y2: endPos.y,
          alpha: 1,
        });
      }

      function animate() {
        ctx.fillStyle = "rgba(0, 0, 0, 0.1)";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        lines.forEach((line, index) => {
          line.alpha -= 0.01 * (1 + scrollProgress);
          if (line.alpha <= 0) lines.splice(index, 1);
        });

        lines.forEach((line) => {
          ctx.beginPath();
          ctx.moveTo(line.x1, line.y1);
          ctx.lineTo(line.x2, line.y2);
          ctx.strokeStyle = `rgba(255, 20, 147, ${line.alpha})`;
          ctx.lineWidth = window.innerWidth < 600 ? 1.5 : 2;
          ctx.stroke();
        });

        if (lines.length < 200 - scrollProgress * 100) {
          createLine();
        }

        requestAnimationFrame(animate);
      }
      
      function flip(){
        const book = document.querySelector('.book');
        book.style.backgroundImage = 'none';
        const buttonFlip = document.getElementById('flip');
        buttonFlip.style.visibility = 'hidden';
        const message = document.querySelector('.message-to-elena');
        message.style.display = 'block';
        
        setTimeout(()=>{
          const secondSpan = document.getElementById('second-span');
          const words = [
            "tamb√©m queria dizer que voc√™ √© muito especial", 
            "fant√°stica", 
            "e muito outras coisas, no qual palavras n√£o s√£o capazes de descrever!"
          ];
          
          let wordIndex = 0;
          let charIndex = 0;
          let isDeleting = false;
          let sizeCount = 0;
          let maxLoops = 3;
          let speed = window.innerWidth < 600 ? 50 : 50; // Velocidade mais lenta em dispositivos m√≥veis
          
          function typeEffect() {
            if(sizeCount >= maxLoops){
              const p = document.querySelector('.message-to-elena');
              p.textContent = 'Querida, Marcelena : Neste dia especial, quero lhe desejar toda a felicidade do mundo. Voc√™ √© uma pessoa incr√≠vel, forte e cheia de luz. Espero que este dia seja t√£o maravilhoso quanto voc√™ DE: L.S PARA : M.M';
              return;
            }
            
            let currentWord = words[wordIndex];
            
            if (isDeleting) {
              secondSpan.textContent = currentWord.substring(0, charIndex - 1);
              charIndex--;
            } else {
              secondSpan.textContent = currentWord.substring(0, charIndex + 1);
              charIndex++;
            }

            if (!isDeleting && charIndex === currentWord.length) {
              isDeleting = true;
              speed = window.innerWidth < 600 ? 100 : 80; // Pausa mais longa em dispositivos m√≥veis
            } else if (isDeleting && charIndex === 0) {
              isDeleting = false;
              sizeCount++;
              speed = window.innerWidth < 600 ? 70 : 60;
              wordIndex = (wordIndex + 1) % words.length;
            }

            setTimeout(typeEffect, speed);
          }
          
          typeEffect();
        }, 8000);
      }
      
      flipButton.addEventListener('click', flip);

      function createConfetti() {
        const confettiCount = window.innerWidth < 600 ? 50 : 100; // Menos confetes em dispositivos m√≥veis
        for (let i = 0; i < confettiCount; i++) {
          let confetti = document.createElement("div");
          confetti.classList.add("confetti");
          confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
          confetti.style.left = `${Math.random() * 100}vw`;
          confetti.style.top = `${Math.random() * 100}vh`;
          confetti.style.animationDuration = `${Math.random() * 3 + 2}s`;
          document.body.appendChild(confetti);
          setTimeout(() => confetti.remove(), 4000);
        }
      }
      
      function showBook(event) {
        const ctx = document.getElementById('heartCanvas');
        const book = document.querySelector('.book');
        const icon = document.querySelector('.icon-arrow');
        
        icon.style.visibility = 'visible';
        ctx.style.visibility = 'hidden';
        book.style.transform = "translate(-50%, -50%) rotateX(0deg)";
        book.style.opacity = "1";
      }
     
      function desableBook() {
        const icon = document.querySelector('.icon-arrow');
        const ctx = document.getElementById('heartCanvas');
        const book = document.querySelector('.book');
        const buttonFlip = document.getElementById('flip');
        const message = document.querySelector('.message-to-elena');
        
        message.style.display = 'none';
        book.style.backgroundImage = "url('/assets/letter.png')";
        book.style.opacity = '0';
        ctx.style.visibility = 'visible';
        buttonFlip.style.visibility = 'visible';
        icon.style.visibility = 'hidden';
      }
      
      icon.addEventListener('click', desableBook);
      btt.addEventListener('click', showBook);
      window.onload = function() {
    window.scrollTo(0, 0);
  };

  // Tamb√©m pode ser usado o evento 'beforeunload' para quando o usu√°rio sair da p√°gina
  window.onbeforeunload = function() {
    window.scrollTo(0, 0);
  };

      window.addEventListener("scroll", () => {
        scrollProgress = window.scrollY / window.innerHeight;
        if (scrollProgress > 0.5) {
          message.style.opacity = "1";
          firstMessage.style.opacity = "0";
          firstMessage.style.animation = 'none';
          activeButton(btt);
          createConfetti();
        } else {
          message.style.opacity = "0";
          firstMessage.style.opacity = "1";
          ocultarButton(btt);
          firstMessage.style.animation = 'blink 1s infinite';
        }

        clearTimeout(scrollTimeout);
        scrollTimeout = setTimeout(() => {
          message.style.opacity = "0";
        }, 3000);
      });

      function activeButton(btt) {
        btt.style.visibility = 'visible';
      }   
      
      function ocultarButton(btt) {
        btt.style.visibility = 'hidden';
      }
      
      animate();
    </script>
  </body>
</html>